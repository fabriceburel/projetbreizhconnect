function o_checkOrClose(a){if(27===a)o_toggleDisplay(o_currentPanel);else{o_checkParent(a.srcElement||a.target)&&o_toggleDisplay(o_currentPanel)}}function o_checkParent(a){for(;a.parentNode;){if(a===o_hGetById("o-ribbon")||a===o_hGetById("o-background")||a===o_hGetById("o-footer-polaris-mobile"))return!1;a=a.parentNode}return!0}function fillDirectSrch(a){return a?a.value="1":o_hGetById("directSrch").value="1",!1}function o_configureHeader(){o_confCommon.debug&&console.info("Preparation de l'affichage du header");var a=o_hGetById("o-header");""!==o_confCommon.useMB&&!1===o_confCommon.responsive&&o_addClass(a,"old-webmail"),o_buildHeaderStructure(),o_buildRibbonLogo(),head.ready("jsonMenu",function(){o_buildNavigation(),o_confCommon.responsive&&o_buildAccordion(),o_confCommon.genericHeaderZone&&o_confCommon.searchZone||o_confCommon.noBtnSearch||o_buildSearchForm("o-nav-search-zone")});var b,c=window.location.host.split("."),d=c.length;b=c[d-2]+"."+c[d-1],o_confCommon.headerDisplay&&!o_sGetCookie("o-cookie-cnil")&&"voila.fr"!==b&&o_confCommon.infoCookieZone&&!/Googlebot/i.test(navigator.userAgent)&&o_buildCookieZone(),""!==o_confCommon.useMB&&o_buildMegaBanStructure(),o_confCommon.serviceZone&&o_confCommon.genericHeaderZone&&o_buildServiceZone(),o_confCommon.genericHeaderZone&&o_confCommon.searchZone&&o_buildSearchForm("o-engine"),head.ready("jsonMenu",function(){o_isMoteurUsed&&o_initCompletion()}),o_confCommon.persoZone&&(o_buildIdentZone(),o_confCommon.isConnected&&(o_confCommon.isMobEnt||(o_confCommon.launchZone?o_buildLauncherZone():o_buildLauncherLink()))),"0"===o_sGetCookie("ua")&&(o_confCommon.switchMobileToDesktop&&!0===o_confCommon.switchMobileToDesktop.activate?o_buildBackToTheMobile():o_bSetCookie("ua","","domain = .orange.fr, expires = -1")),o_changeAllLinks("o-header"),o_confCommon.callbackHead()}function o_initCompletion(a,b,c,d){var e,f=b||o_hGetById("o-search-input")||o_hGetById("o-mobile-panel-input"),g=c||"EC_standard_completion";e="Rechercher sur Orange";var h=function(){o_initCompletion(a,f,c,d),o_removeEvent(f,"focus",h)};try{if(d!==undefined?e=d:o_confCommon.responsiveMobile&&(e="rechercher sur orange.fr"),!o_confCommon.unifiedSearchEngine||!o_confCommon.unifiedSearchEngine.label||o_confCommon.classicSearch||"EC_standard_completion"!==g&&"EC_nav_completion"!==g||(e=o_confCommon.unifiedSearchEngine.label),o_confCommon.responsiveMobile?f.setAttribute("placeholder",e):document.querySelector("#o-search-label, #"+f.parentNode.id+" .o-search-label").innerHTML=e,f&&0===f.offsetHeight&&!0===o_confCommon.polaris3Mode)o_addEvent(f,"focus",h);else{if("https:"===document.location.protocol&&(o_confCommon.cmplPetale=!1),b?(o_confCommon.searchInputs[b.id]=g,f=b):o_confCommon.searchInputs[f.id]=g,f){var i={cssPrefix:"cmpl ec",url:document.location.protocol+"//completion.ke.orange.fr/proxy/cmplsearchbox",field:f,nameOfInstanceForJsonP:"BLO_Autocompletion."+g,additionalParams:"ref=urlwg_rubanGP3_recherche_lancer_completion&target=orange",maxNbChar:100,closeCompletionOnBlur:!0,isFormSubmit:!1,onClickCompletion:!0,onClickCompletionBaseUrl:"//api.ke.orange.fr/searchToptrends",onClickCompletionVersion:"v2.1",onClickCompletionAuthKey:"fd5f4401-2e17-4ef5-8562-c71e82d294f1",callbacks:{submit:{context:window,method:"o_headerFormSetup"}}};i.blocks={"default":[{label:"",baseId:-3,max:8}],toptrend:[{label:"Top tendance",max:5,type:"top",bottomLabel:""}]},o_confCommon.responsiveMobile&&(i.cssPrefix="cmpl ec mobile"),!o_confCommon.unifiedSearchEngine||o_confCommon.classicSearch||"EC_standard_completion"!==g&&"EC_nav_completion"!==g||(o_confCommon.unifiedSearchEngine.cmplUrl&&(i.url=o_confCommon.unifiedSearchEngine.cmplUrl),o_confCommon.unifiedSearchEngine.cmplAdditionalParams&&(i.additionalParams+="&"+o_confCommon.unifiedSearchEngine.cmplAdditionalParams),o_confCommon.unifiedSearchEngine.cmplBlocks&&o_confCommon.unifiedSearchEngine.cmplBlocks[0]&&(o_confCommon.unifiedSearchEngine.cmplBlocks[0].baseId&&(i.blocks["default"][0].baseId=o_confCommon.unifiedSearchEngine.cmplBlocks[0].baseId),o_confCommon.unifiedSearchEngine.cmplBlocks[0].max&&(i.blocks["default"][0].max=o_confCommon.unifiedSearchEngine.cmplBlocks[0].max),o_confCommon.unifiedSearchEngine.cmplBlocks[0].label&&(i.blocks["default"][0].label=o_confCommon.unifiedSearchEngine.cmplBlocks[0].label)),o_confCommon.unifiedSearchEngine&&o_confCommon.unifiedSearchEngine.toptrendCategory&&(i.onClickCompletionCategory=o_confCommon.unifiedSearchEngine.toptrendCategory),o_confCommon.unifiedSearchEngine&&!o_confCommon.unifiedSearchEngine.toptrend&&(i.onClickCompletion=!1)),a=o_mergeArrays(i,a),o_confCommon.responsiveMobile&&(a.plugins=["DirectLink","PetaleMobile"],i.onClickCompletion=!1),o_confCommon.cmplPetale?(a.Petale=!0,o_confCommon.responsiveMobile||(o_confCommon.unifiedSearchEngine?o_confCommon.unifiedSearchEngine.toptrend?a.plugins=["DirectLink","Petale","TopTrend"]:a.plugins=["DirectLink","Petale"]:a.plugins=["DirectLink","Petale","TopTrend"]),a.petaleLeftShiftWidth=0,a.petaleTopShiftHeight=0,a.petaleSmoothShow=!1,a.petaleDefaultImages={"default":"http://img.ke.orange.fr/I/leMoteur/petaleGenericImage.jpg",people:"http://img.ke.orange.fr/I/leMoteur/petaleGenericPeople.jpg",shopping:"http://img.ke.orange.fr/I/leMoteur/petaleGenericShopping.jpg",meteo:"http://img.ke.orange.fr/I/leMoteur/petaleGenericMeteo.jpg"}):a.plugins=["DirectLink","TopTrend"],BLO_Autocompletion[g]===undefined&&(BLO_Autocompletion[g]=new orangesearch.EC.completion.Component(a)),BLO_Autocompletion[g].isStarted()?(o_confCommon.noPluginProperties=o_mergeArrays(i,a),delete o_confCommon.noPluginProperties.plugins,BLO_Autocompletion[g].restart(o_confCommon.noPluginProperties)):BLO_Autocompletion[g].start(),o_addEvent(document.body,eventType,function(a){for(var b=a.srcElement||a.target,c=!1;b.parentNode;)b!==o_hGetById("o-engine")&&b!==o_hGetById("o-ribbon")&&b!==o_hGetById("o-header-wrapper")&&b!==o_hGetById("o-service")&&b!==o_hGetById("o-mobile-panel-search")||(c=!0),b=b.parentNode;c||BLO_Autocompletion[g].hideCompletionDiv()},!1)}!1===o_confCommon.useCompletion&&BLO_Autocompletion[g].disable()}}catch(j){console.error("Impossible d'instancier la completion: "+j)}}function o_headerFormSetup(a){if(""===a.query){var b=document.location.host.replace(".orange.fr","");return top.location.href="http://r.orange.fr/r/Ohome_moteur?ref="+b+"_urlwg_rubanGP3_recherche_lancer_home",!1}var c=o_confCommon.searchInputs[o_hGetById(a.id).id];a&&a.div&&BLO_Autocompletion[c].isSelectedSuggestion()&&(searchForm=o_hGetById(a.id).parentNode,searchForm.suggest=document.createElement("INPUT"),searchForm.suggest.type="hidden",searchForm.suggest.name="o-suggest",searchForm.suggest.id="o-suggest",searchForm.suggest.value="on"),BLO_Autocompletion&&BLO_Autocompletion[c]&&"top"===BLO_Autocompletion[c].currentBlocks[0].type&&(searchForm.toptrend=document.createElement("INPUT"),searchForm.toptrend.type="hidden",searchForm.toptrend.name="o-toptrend",searchForm.toptrend.id="o-toptrend",searchForm.toptrend.value="on"),o_changeImgForGstat4("urlwg_rubanGP3_rechercher"),o_headerFormSubmit(a)}function o_headerFormSubmit(a){var b=o_hGetById(a.id).value,c=o_hGetById(a.id).parentNode,d=!1,e=!1,f="&bhv=web_fr&module="+o_defaultMoteurModule+"&target=orange",g=document.location.protocol+"//lemoteur.orange.fr/",h="",i="kw";!o_confCommon.unifiedSearchEngine||o_confCommon.classicSearch||"EC_standard_completion"!==o_confCommon.searchInputs[a.id]&&"EC_nav_completion"!==o_confCommon.searchInputs[a.id]||(o_confCommon.unifiedSearchEngine.queryUrl&&(g=o_confCommon.unifiedSearchEngine.queryUrl),o_confCommon.unifiedSearchEngine.queryParamName&&(i=o_confCommon.unifiedSearchEngine.queryParamName),o_confCommon.unifiedSearchEngine.queryAdditionalParams&&(f="&"+o_confCommon.unifiedSearchEngine.queryAdditionalParams)),g=g+"?"+i+"=",c.suggest&&"on"===c.suggest.value&&(d=!0),c.toptrend&&"on"===c.toptrend.value&&(e=!0),sUrlReferrerHead=sUrlReferrer+"_urlwg_rubanGP3_recherche_lancer_requete",d&&(sUrlReferrerHead+="_completion"),e&&(sUrlReferrerHead+="_toptrend"),-1!==document.location.host.indexOf("pro.orange.fr")&&(f+="&profil=pro"),g+=encodeURIComponent(b)+f,d&&(g+="&suggest=on"),h="http://r.orange.fr/r?ref="+sUrlReferrerHead+"&url="+encodeURIComponent(g),""!==b&&(top.location.href=h)}function o_setRibbonCookie(){o_removeEvent(document,eventType,o_setRibbonCookie,!0),o_sGetCookie("o-cookie-cnil")||o_bSetCookie("o-cookie-cnil",1,"domain = .orange.fr, expires =365")}function o_detectNavigationOrange(a){function b(a){return!(!a||!a.href||-1===a.href.indexOf(".orange.fr"))||!!(a=a.parentNode)&&b(a)}return b(a.target||a.srcElement)}function o_ajax(a,b){var c,d=b||{};d={method:b.method||"GET",accept:b.accept||"",withCredentials:b.withCredentials||!1,headers:b.headers||{},data:b.data||null,synchronous:b.synchronous||!1,timeout:b.timeout,onSuccess:b.onSuccess||null,onError:b.onError||null,onLoadEnd:b.onLoadEnd||null},navig.isFF&&!0===b.synchronous&&!0===b.withCredentials&&(d.synchronous=!1);try{if("GET"!==d.method.toUpperCase()&&"POST"!==d.method.toUpperCase()||""===a)throw new Error("Paramètres invalides pour l'envoi d'une requête XHR.");if(d.withCredentials&&navig.isIE&&navig.getVersion()<=9)c=new XDomainRequest,c.open(d.method,a);else{c=new XMLHttpRequest,c.withCredentials=d.withCredentials,c.open(d.method,a,!d.synchronous);for(var e in d.headers)d.headers.hasOwnProperty(e)&&c.setRequestHeader(e,d.headers[e]);d.accept!==undefined&&c.setRequestHeader("Accept",d.accept),"POST"===d.method.toUpperCase()&&d.headers["Content-Type"]===undefined&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}d.synchronous||(c.timeout=d.timeout,d.timeout>0&&(c.ontimeout=function(a){null!==d.onError&&d.onError(c,a),o_log("Timeout de la requête XHR dépassé.","warn")})),null!==d.onSuccess&&(c.onload=function(){d.onSuccess(c)}),null!==d.onLoadEnd&&c.addEventListener("loadend",function(){d.onLoadEnd(c)},!1),c.onerror=function(a){null!==d.onError&&d.onError(c,a),o_log("Ereur lors de l'envoi de la requête XHR.","warn")},c.send(d.data)}catch(f){o_log(f.message,"warn")}}function o_startHeader(){head.ready(function(){if(o_confCommon.headerDisplay&&("BUSINESSPOSTPAID"!==o_idzone.MOBILE_OFFER_TYPE&&"BUSINESSPREPAID"!==o_idzone.MOBILE_OFFER_TYPE&&"BUSINESSSEMIPREPAID"!==o_idzone.MOBILE_OFFER_TYPE||(o_confCommon.isMobEnt=!0,o_gStatSegment="MonEnt"),o_confCommon.navZone)){var a="res",b="desktop";o_confCommon.isMobEnt&&(a="mobent"),o_confCommon.isSosh&&(a="sosh"),o_confCommon.responsiveMobile&&(b="mobile"),head.js({jsonMenu:document.location.protocol+"//"+staticServ+"/Magic/menusPolaris."+a+"."+b+".json"})}isHeaderReady()})}var BLO_Autocompletion=[],o_gStatSegment="GP",eventType="click",eventTypeAttribute="onclick";navig.isTouchDevice()&&!navig.isIE&&(eventType="touchstart",eventTypeAttribute="ontouchstart"),o_addEvent(document,eventType,function(a){o_checkOrClose(a)},!1),o_addEvent(document,"keydown",function(a){27===a.keyCode&&o_checkOrClose(27)},!1),o_startHeader();